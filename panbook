#!/bin/bash
[ "$TRACE"x == "x"x ] && set -x

SCRIPTDIR=`cd $(dirname $0);pwd`
cwd=`pwd`
ofile=`echo $cwd |awk -F '/' '{print $NF}'`

source $SCRIPTDIR/libs/helper.sh
source $SCRIPTDIR/libs/env.sh

getEnv SRC "src"
WORKDIR="$cwd/$SRC"
getEnv IMGDIR "$WORKDIR/images"

BUILD="$cwd/build"
METADATA="$WORKDIR/metadata.yaml"

source $SCRIPTDIR/libs/core.sh

info "Welcome to PanBook!"
note "ScriptDir: $SCRIPTDIR"
note "WorkDir: $WORKDIR"
note "ImgDir: $IMGDIR"

source $SCRIPTDIR/libs/module-*.sh

case $# in
	0) printhelp;;
	1) [ $1 == "help" ] && printhelp  || eval `echo $1`;;
	2) [ "$2"x = "d"x ] && DEBUG="true";eval `echo $1`;;
	*) printhelp;;
esac
